{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getAPI } from '@/axios-api';\nimport Header from '@/components/Header';\nimport Footer from '@/components/Footer';\nimport SearchBar from '@/views/inner/SearchBar';\nexport default {\n  name: 'News-list',\n  data() {\n    return {\n      bookData: [],\n      gerneData: [],\n      bookSearch: \"\",\n      searchCategory: {\n        text: '제목',\n        value: 'title'\n      },\n      pageNum: 0,\n      selectedG: []\n    };\n  },\n  props: {\n    pageSize: {\n      type: Number,\n      required: false,\n      default: 5\n    }\n  },\n  components: {\n    Header,\n    Footer,\n    SearchBar\n  },\n  created() {\n    getAPI.get('/books/').then(response => {\n      console.log(response);\n      console.log('books API has recieved data');\n      this.bookData = response.data;\n    }).catch(err => {\n      console.log(err);\n    });\n    getAPI.get('/genre/').then(response => {\n      console.log(response);\n      console.log('gerne API has recieved data');\n      this.gerneData = response.data;\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n  methods: {\n    nextPage() {\n      this.pageNum += 1;\n    },\n    movePage(e) {\n      this.pageNum = e;\n    },\n    prevPage() {\n      this.pageNum -= 1;\n    },\n    selectG(event) {\n      const value = event.currentTarget.value;\n      const inner = {\n        'gerne': value\n      };\n      this.selectedG.push(inner);\n    },\n    deletG(item) {\n      for (let i = 0; i < this.selectedG.length; i++) {\n        if (this.selectedG[i] === item) {\n          this.selectedG.splice(i, 1);\n          i--;\n        }\n      }\n    },\n    selCategory(event) {\n      console.log(event.srcElement.attributes.value.value);\n      console.log(event.target.text);\n      this.searchCategory.text = event.target.text;\n      this.searchCategory.value = event.srcElement.attributes.value.value;\n      console.log(this.searchCategory);\n    }\n  },\n  computed: {\n    //  pageCount () {\n    //    let listLeng = this.newsData.length,\n    //        listSize = this.pageSize,\n    //        page = Math.floor(listLeng / listSize);\n    //    page = Math.floor((listLeng - 1) / listSize) + 1\n    //    return page;\n    //  },\n    bookData() {\n      const start = this.pageNum * this.pageSize,\n        end = start + this.pageSize;\n      return this.bookData.filter(val => {\n        if (this.searchCategory == \"제목\") {}\n        var searchVal = val.title.toUpperCase().indexOf(this.bookSearch.toUpperCase()) >= 0;\n        return searchVal;\n      }).slice(start, end);\n    }\n  }\n};","map":{"version":3,"mappings":";AAuIE,SAASA,MAAK,QAAS,aAAY;AACnC,OAAOC,MAAK,MAAO,qBAAoB;AACvC,OAAOC,MAAK,MAAO,qBAAoB;AACvC,OAAOC,SAAQ,MAAO,yBAAwB;AAEhD,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAG,GAAK;IACN,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE,EAAE;MACdC,cAAc,EAAE;QAACC,IAAI,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAO,CAAC;MAC5CC,OAAO,EAAE,CAAC;MACVC,SAAS,EAAE;IACb;EACF,CAAC;EACDC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE,KAAK;MACfC,OAAO,EAAE;IACX;EACF,CAAC;EACFC,UAAU,EAAE;IACTnB,MAAM;IACNC,MAAM;IACNC;EACF,CAAC;EACDkB,OAAM,GAAK;IACTrB,MAAM,CAACsB,GAAG,CAAC,SAAS,EACjBC,IAAI,CAACC,QAAO,IAAK;MAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ;MACpBC,OAAO,CAACC,GAAG,CAAC,6BAA6B;MACzC,IAAI,CAACpB,QAAO,GAAIkB,QAAQ,CAACnB,IAAG;IAC9B,CAAC,EACAsB,KAAK,CAACC,GAAE,IAAK;MACZH,OAAO,CAACC,GAAG,CAACE,GAAG;IACjB,CAAC;IACH5B,MAAM,CAACsB,GAAG,CAAC,SAAS,EACjBC,IAAI,CAACC,QAAO,IAAK;MAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ;MACpBC,OAAO,CAACC,GAAG,CAAC,6BAA6B;MACzC,IAAI,CAACnB,SAAQ,GAAIiB,QAAQ,CAACnB,IAAG;IAC/B,CAAC,EACAsB,KAAK,CAACC,GAAE,IAAK;MACZH,OAAO,CAACC,GAAG,CAACE,GAAG;IACjB,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACPC,QAAO,GAAK;MACV,IAAI,CAAClB,OAAM,IAAK,CAAC;IACnB,CAAC;IACDmB,QAAQ,CAACC,CAAC,EAAE;MACV,IAAI,CAACpB,OAAM,GAAIoB,CAAC;IAClB,CAAC;IACDC,QAAO,GAAK;MACV,IAAI,CAACrB,OAAM,IAAK,CAAC;IACnB,CAAC;IAEDsB,OAAO,CAACC,KAAK,EAAE;MACb,MAAMxB,KAAI,GAAIwB,KAAK,CAACC,aAAa,CAACzB,KAAI;MACtC,MAAM0B,KAAI,GAAI;QAAC,OAAO,EAAE1B;MAAK;MAE7B,IAAI,CAACE,SAAS,CAACyB,IAAI,CAACD,KAAK;IAC3B,CAAC;IACDE,MAAM,CAACC,IAAI,EAAE;MACX,KAAI,IAAIC,IAAI,CAAC,EAAEA,IAAI,IAAI,CAAC5B,SAAS,CAAC6B,MAAM,EAAED,CAAC,EAAE,EAAE;QAC7C,IAAG,IAAI,CAAC5B,SAAS,CAAC4B,CAAC,MAAMD,IAAI,EAAG;UAC9B,IAAI,CAAC3B,SAAS,CAAC8B,MAAM,CAACF,CAAC,EAAE,CAAC,CAAC;UAC3BA,CAAC,EAAE;QACL;MACF;IACF,CAAC;IACDG,WAAW,CAACT,KAAK,EAAE;MACjBV,OAAO,CAACC,GAAG,CAACS,KAAK,CAACU,UAAU,CAACC,UAAU,CAACnC,KAAK,CAACA,KAAK;MACnDc,OAAO,CAACC,GAAG,CAACS,KAAK,CAACY,MAAM,CAACrC,IAAI;MAC7B,IAAI,CAACD,cAAc,CAACC,IAAG,GAAIyB,KAAK,CAACY,MAAM,CAACrC,IAAG;MAC3C,IAAI,CAACD,cAAc,CAACE,KAAI,GAAIwB,KAAK,CAACU,UAAU,CAACC,UAAU,CAACnC,KAAK,CAACA,KAAI;MAClEc,OAAO,CAACC,GAAG,CAAC,IAAI,CAACjB,cAAc;IACjC;EACF,CAAC;EACDuC,QAAQ,EAAE;IACV;IACA;IACA;IACA;IACA;IACA;IACA;IACE1C,QAAO,GAAK;MACV,MAAM2C,KAAI,GAAI,IAAI,CAACrC,OAAM,GAAI,IAAI,CAACG,QAAQ;QACxCmC,GAAE,GAAID,KAAI,GAAI,IAAI,CAAClC,QAAQ;MAEhC,OAAO,IAAI,CAACT,QAAQ,CAAC6C,MAAM,CAAEC,GAAG,IAAK;QAChC,IAAG,IAAI,CAAC3C,cAAa,IAAK,IAAI,EAAE,CAEhC;QACA,IAAI4C,SAAQ,GAAID,GAAG,CAACE,KAAK,CAACC,WAAW,EAAE,CAACC,OAAO,CAAC,IAAI,CAAChD,UAAU,CAAC+C,WAAW,EAAE,KAAK,CAAC;QACnF,OAAOF,SAAQ;MACjB,CAAC,CAAC,CAACI,KAAK,CAACR,KAAK,EAAEC,GAAG,CAAC;IACtB;EACF;AACF","names":["getAPI","Header","Footer","SearchBar","name","data","bookData","gerneData","bookSearch","searchCategory","text","value","pageNum","selectedG","props","pageSize","type","Number","required","default","components","created","get","then","response","console","log","catch","err","methods","nextPage","movePage","e","prevPage","selectG","event","currentTarget","inner","push","deletG","item","i","length","splice","selCategory","srcElement","attributes","target","computed","start","end","filter","val","searchVal","title","toUpperCase","indexOf","slice"],"sourceRoot":"","sources":["/Users/isg/Desktop/work/webstudy/Django-vue-library/vue-templates/src/views/books/Books.vue"],"sourcesContent":["<template>\n<div class=\"\">\n  <Header></Header> \n\n  <div class=\"content\"><div class=\"container\"> \n    <h3>도서 리스트</h3>\n\t\t\n    <!--<SearchBar></SearchBar>-->\n    <!--<div class=\"search d-block\">\n      <input type=\"search\" v-model=\"boardSearch\">\n      <button type=\"submit\"><i class=\"xi-search\"></i></button>\n    </div>-->\n\n    <div class=\"search\">\n      <div class=\"d-flex search-bar\">\n        <div class=\"btn-group\">\n          <button class=\"btn dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" :value=\"this.searchCategory.value\" >\n            {{this.searchCategory.text}}\n          </button>\n          <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n            <li><a class=\"dropdown-item\" href=\"#\" @click=\"selCategory($event)\" value=\"title\">제목</a></li>\n            <li><a class=\"dropdown-item\" href=\"#\" @click=\"selCategory($event)\" value=\"author\">저자</a></li>\n            <li><a class=\"dropdown-item\" href=\"#\" @click=\"selCategory($event)\" value=\"publisher\">출판사</a></li>\n          </ul>\n        </div>\n      <input type=\"search\" v-model=\"bookSearch\">\n      <button type=\"submit\" class=\"normal\"><font-awesome-icon icon=\"fa-solid fa-magnifying-glass\" /></button>\n      </div>\n\n      <div class=\"gerne-sel\">\n        <div class=\"d-inline\">장르: </div>\n\n        <div class=\"btn-group d-inline\">\n          <button class=\"btn dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n            장르 선택\n          </button>\n          <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton1\">\n            <li v-for=\"gerne in gerneData\" :key=\"gerne\">\n              <button class=\"dropdown-item\" :id=\"gerne.id\" @click=\"selectG($event)\" :value=gerne.name>\n                {{gerne.name}}\n              </button>\n            </li>\n          </ul>\n        </div>\n\n        <ul class=\"gerne-selected d-flex\" ref=\"sek_G\">\n          <li v-for=\"sekG in selectedG\" :key=\"sekG\" class=\"sel\">\n            <span class=\"gerne\">{{sekG.gerne}}</span>\n            <button v-on:click=\"deletG(sekG)\" class=\"normal\">\n              <font-awesome-icon icon=\"fa-regular fa-circle-xmark\" />\n            </button>\n          </li>\n          \n        </ul>\n      </div>\n    </div>\n\n\n  <div class=\"book-list\">\n    <div class=\"book-card\" v-for=\"book in bookData\" :key=\"book\">\n\n      <div class=\"d-flex\">\n        <div class=\"img-wrap\">\n          <img :src=\"'http://127.0.0.1:8000'+book.image\" alt=\"book-img\">\n        </div>\n        <div class=\"book-info\">\n          <div class=\"d-flex justify-content-between\">\n            <div class=\"book-title\">{{book.title}}</div>\n            <div class=\"book-loan\">\n              <font-awesome-icon icon=\"fa-brands fa-leanpub\" />\n              일단은 대출가능</div>\n          </div>\n          <div class=\"d-flex info-detail\">\n            <div class=\"book-author\">  \n              <span class=\"type\">저자: </span>\n              <span v-for=\"(thisAuthor,index) in book.author\" :key=\"thisAuthor\">\n                <router-link :to=\"{ name:'Author', params:{id:thisAuthor.id}}\">{{thisAuthor.name}}</router-link>\n                <span v-if=\"index < book.author.length-1\">, </span>\n              </span>\n            </div>\n            <div class=\"book-publisher\">\n              <span class=\"type\">퍼블리셔: </span>{{book.publisher}}\n              </div>\n            <div class=\"book-genre\">\n              <span class=\"type\">장르: </span>\n              <span v-for=\"(thisGenre,index) in book.genre\" :key=\"thisGenre\">\n                {{thisGenre.name}}<span v-if=\"index < book.genre.length-1\">, </span>\n              </span>\n            </div>\n          </div>\n          <div class=\"book-summary\">{{book.summary}}</div>\n          <button class=\"normal ml-auto innerBook\">자세히 보기</button>\n        </div>\n      </div>\n\n      <!--<bookInnerModal></bookInnerModal>-->\n      \n      <!--<router-link :to=\"{ name:'BookInner', params:{id:book.id}}\">{{ book.title }}</router-link>-->\n    </div>\n  </div>\n\n    <div class=\"btn-cover\">\n      <button v-if=\"pageNum === 0 ?false:true\" @click=\"prevPage\" class=\"page-btn\">\n        이전\n      </button>\n\n      <button v-if=\"pageNum < 2 ?false:true\" @click=\"movePage(pageNum-2)\" class=\"page-btn\">\n        {{ pageNum -1 }}\n      </button>\n      <button v-if=\"pageNum < 1 ?false:true\" @click=\"movePage(pageNum-1)\" class=\"page-btn\">\n        {{ pageNum }}\n      </button>\n      <button @click=\"prevPage\" class=\"page-btn active\">\n        {{ pageNum +1 }}\n      </button>\n      <button v-if=\"pageNum >= pageCount - 1 ?false:true\" @click=\"movePage(pageNum+1)\" class=\"page-btn\">\n        {{ pageNum +2 }}\n      </button>\n      <button v-if=\"pageNum >= pageCount - 2 ?false:true\" @click=\"movePage(pageNum+2)\" class=\"page-btn\">\n        {{ pageNum +3 }}\n      </button>\n\n      <!--<span class=\"page-count\">{{ pageNum + 1 }} / {{ pageCount }} 페이지</span>-->\n      <button v-if=\"pageNum >= pageCount - 1 ?false:true\" @click=\"nextPage\" class=\"page-btn\">\n        다음\n      </button>\n    </div>\n\n    </div></div>\n\n    <Footer></Footer>\n</div>\n</template>\n\n<script>\n  import { getAPI } from '@/axios-api'\n  import Header from '@/components/Header'\n  import Footer from '@/components/Footer'\n  import SearchBar from '@/views/inner/SearchBar'\n\nexport default {\n  name: 'News-list',\n  data () {\n    return {\n      bookData: [],\n      gerneData: [],\n      bookSearch: \"\",\n      searchCategory: {text: '제목', value: 'title'},\n      pageNum: 0,\n      selectedG: [],\n    }\n  },\n  props: {\n    pageSize: {\n      type: Number,\n      required: false,\n      default: 5\n    }\n  },\n\tcomponents: {\n    Header,\n    Footer,\n    SearchBar\n  },\n  created () {\n    getAPI.get('/books/')\n      .then(response => {\n        console.log(response)\n        console.log('books API has recieved data')\n        this.bookData = response.data\n      })\n      .catch(err => {\n        console.log(err)\n      })\n    getAPI.get('/genre/')\n      .then(response => {\n        console.log(response)\n        console.log('gerne API has recieved data')\n        this.gerneData = response.data\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  },\n  methods: {\n    nextPage () {\n      this.pageNum += 1;\n    },\n    movePage(e) {\n      this.pageNum = e;\n    },\n    prevPage () {\n      this.pageNum -= 1;\n    },\n\n    selectG(event) {\n      const value = event.currentTarget.value\n      const inner = {'gerne': value}\n\n      this.selectedG.push(inner)\n    },\n    deletG(item) {\n      for(let i = 0; i < this.selectedG.length; i++) {\n        if(this.selectedG[i] === item)  {\n          this.selectedG.splice(i, 1);\n          i--;\n        }\n      }\n    },\n    selCategory(event) {\n      console.log(event.srcElement.attributes.value.value)\n      console.log(event.target.text)\n      this.searchCategory.text = event.target.text\n      this.searchCategory.value = event.srcElement.attributes.value.value\n      console.log(this.searchCategory)\n    }\n  },\n  computed: {\n  //  pageCount () {\n  //    let listLeng = this.newsData.length,\n  //        listSize = this.pageSize,\n  //        page = Math.floor(listLeng / listSize);\n  //    page = Math.floor((listLeng - 1) / listSize) + 1\n  //    return page;\n  //  },\n    bookData () {\n      const start = this.pageNum * this.pageSize,\n        end = start + this.pageSize;\n\n\t\t\treturn this.bookData.filter((val) => {\n        if(this.searchCategory == \"제목\") {\n\n        }\n        var searchVal = val.title.toUpperCase().indexOf(this.bookSearch.toUpperCase()) >= 0;\n        return searchVal\n      }).slice(start, end);\n    },\n  }\n}\n\n</script>\n\n<style>\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\ntable th {\n  font-size: 1.2rem;\n}\ntable tr {\n  height: 2rem;\n  text-align: center;\n  border-bottom: 1px solid #505050;\n}\ntable tr:first-of-type {\n  border-top: 2px solid #404040;\n}\ntable tr td {\n  padding: 1rem 0;\n  font-size: 1.1rem;\n}\n.btn-cover {\n  margin-top: 1.5rem;\n  text-align: center;\n}\n.btn-cover .page-btn {\n  width: 5rem;\n  height: 2rem;\n  letter-spacing: 0.5px;\n}\n.btn-cover .page-count {\n  padding: 0 1rem;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}