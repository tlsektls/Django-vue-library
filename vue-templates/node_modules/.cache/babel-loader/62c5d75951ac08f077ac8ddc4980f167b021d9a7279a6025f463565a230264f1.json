{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getAPI } from '@/axios-api';\nimport Header from '@/components/Header';\nimport Footer from '@/components/Footer';\nimport News from '@/components/inner/News';\nimport Map from '@/components/inner/Map';\nimport SearchBar from '@/views/inner/SearchBar';\nimport Datepicker from 'vuejs3-datepicker';\nimport { Pagination, Navigation } from \"swiper\";\nimport { Swiper, SwiperSlide } from \"swiper/vue\";\n\n// Import Swiper styles\nimport \"swiper/css\";\nimport \"swiper/css/pagination\";\nimport \"swiper/css/navigation\";\nexport default {\n  name: 'Index',\n  data() {\n    return {\n      bookData: [],\n      offDayData: []\n    };\n  },\n  components: {\n    Header,\n    Footer,\n    News,\n    Map,\n    SearchBar,\n    Datepicker,\n    Swiper,\n    SwiperSlide\n  },\n  beforeCreate() {\n    this.$store.commit('initializerStore');\n    const access = this.$store.state.access;\n    if (access) {\n      getAPI.defaults.headers.common['Authorization'] = \"JWT \" + access;\n    } else {\n      getAPI.defaults.headers.common['Authorization'] = '';\n    }\n  },\n  created() {\n    getAPI.get('/book/').then(response => {\n      console.log('book API has recieved data');\n      console.log(response);\n      this.IndexData = response.data;\n    }).catch(err => {\n      console.log(err);\n    });\n    getAPI.get('/offday/').then(response => {\n      console.log('offday API has recieved data');\n      console.log(response);\n      this.offDayData = response.data;\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n  mounted() {\n    setInterval(() => {\n      this.getAccess();\n    }, 6000000); //6000000\n  },\n\n  methods: {\n    getAccess(e) {\n      const accessData = {\n        refresh: this.$store.state.refresh\n      };\n      getAPI.post('api/v1/jwt/refresh', accessData).then(response => {\n        const access = response.data.access;\n        localStorage.setItem(\"access\", access);\n        this.$store.commit('setAccess', access);\n      }).catch(error => {\n        console.log(\"refresh\", error);\n      });\n    },\n    logout() {\n      this.getAccess();\n      console.log(\"LOGOUT\");\n      localStorage.setItem(\"access\", '');\n      localStorage.setItem(\"refresh\", '');\n      this.$store.commit('removeToken');\n    }\n  },\n  computed: {\n    getOffDay() {\n      const dateArr = [];\n      for (let i = 0; i < this.offDayData.length; i++) {\n        let date = this.offDayData[i]['offday'];\n        dateArr.push(new Date(date));\n      }\n      return dateArr;\n    }\n  },\n  setup() {\n    return {\n      modules: [Pagination, Navigation]\n    };\n  }\n};","map":{"version":3,"mappings":";AAyIE,SAASA,MAAK,QAAS,aAAY;AACnC,OAAOC,MAAK,MAAO,qBAAoB;AACvC,OAAOC,MAAK,MAAO,qBAAoB;AACvC,OAAOC,IAAG,MAAO,yBAAwB;AACzC,OAAOC,GAAE,MAAO,wBAAuB;AACvC,OAAOC,SAAQ,MAAO,yBAAwB;AAC9C,OAAOC,UAAS,MAAO,mBAAmB;AAC1C,SAASC,UAAU,EAAEC,UAAS,QAAS,QAAQ;AAC/C,SAASC,MAAM,EAAEC,WAAU,QAAS,YAAY;;AAElD;AACA,OAAO,YAAY;AAEnB,OAAO,uBAAuB;AAC9B,OAAO,uBAAuB;AAG5B,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,IAAG,GAAK;IACN,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE;IACd;EACF,CAAC;EACDC,UAAU,EAAE;IACVd,MAAM;IACNC,MAAM;IACNC,IAAI;IACJC,GAAG;IACHC,SAAS;IACTC,UAAU;IACVG,MAAM;IACNC;EACF,CAAC;EACDM,YAAY,GAAG;IACb,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,kBAAkB;IACrC,MAAMC,MAAK,GAAI,IAAI,CAACF,MAAM,CAACG,KAAK,CAACD,MAAK;IACtC,IAAGA,MAAM,EAAE;MACTnB,MAAM,CAACqB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,MAAK,GAAIJ,MAAK;IAClE,OAAO;MACLnB,MAAM,CAACqB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,EAAC;IACrD;EACF,CAAC;EACDC,OAAM,GAAK;IACTxB,MAAM,CAACyB,GAAG,CAAC,QAAQ,EAChBC,IAAI,CAACC,QAAO,IAAK;MAChBC,OAAO,CAACC,GAAG,CAAC,4BAA4B;MACxCD,OAAO,CAACC,GAAG,CAACF,QAAQ;MACpB,IAAI,CAACG,SAAQ,GAAIH,QAAQ,CAACf,IAAG;IAC/B,CAAC,EACAmB,KAAK,CAACC,GAAE,IAAK;MACZJ,OAAO,CAACC,GAAG,CAACG,GAAG;IACjB,CAAC;IACHhC,MAAM,CAACyB,GAAG,CAAC,UAAU,EAClBC,IAAI,CAACC,QAAO,IAAK;MAChBC,OAAO,CAACC,GAAG,CAAC,8BAA8B;MAC1CD,OAAO,CAACC,GAAG,CAACF,QAAQ;MACpB,IAAI,CAACb,UAAS,GAAIa,QAAQ,CAACf,IAAG;IAChC,CAAC,EACAmB,KAAK,CAACC,GAAE,IAAK;MACZJ,OAAO,CAACC,GAAG,CAACG,GAAG;IACjB,CAAC;EACL,CAAC;EACDC,OAAO,GAAG;IACRC,WAAW,CAAC,MAAM;MAChB,IAAI,CAACC,SAAS,EAAC;IACjB,CAAC,EAAE,OAAO,GAAE;EACd,CAAC;;EACDC,OAAO,EAAE;IACPD,SAAS,CAACE,CAAC,EAAE;MACX,MAAMC,UAAS,GAAI;QACjBC,OAAO,EAAE,IAAI,CAACtB,MAAM,CAACG,KAAK,CAACmB;MAC7B;MACAvC,MAAM,CAACwC,IAAI,CAAC,oBAAoB,EAAEF,UAAU,EAC3CZ,IAAI,CAACC,QAAO,IAAK;QAChB,MAAMR,MAAK,GAAIQ,QAAQ,CAACf,IAAI,CAACO,MAAK;QAClCsB,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEvB,MAAM;QACrC,IAAI,CAACF,MAAM,CAACC,MAAM,CAAC,WAAW,EAAEC,MAAM;MACxC,CAAC,EACAY,KAAK,CAACY,KAAI,IAAK;QACdf,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEc,KAAK;MAC9B,CAAC;IACH,CAAC;IACDC,MAAM,GAAG;MACP,IAAI,CAACT,SAAS,EAAC;MACfP,OAAO,CAACC,GAAG,CAAC,QAAQ;MACpBY,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAE,EAAE;MACjCD,YAAY,CAACC,OAAO,CAAC,SAAS,EAAE,EAAE;MAClC,IAAI,CAACzB,MAAM,CAACC,MAAM,CAAC,aAAa;IAClC;EACF,CAAC;EACD2B,QAAQ,EAAE;IACRC,SAAS,GAAG;MACV,MAAMC,OAAM,GAAI,EAAC;MACjB,KAAI,IAAIC,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC,IAAI,CAAClC,UAAU,CAACmC,MAAM,EAAED,CAAC,EAAE,EAAE;QAC1C,IAAIE,IAAG,GAAI,IAAI,CAACpC,UAAU,CAACkC,CAAC,CAAC,CAAC,QAAQ;QACtCD,OAAO,CAACI,IAAI,CAAC,IAAIC,IAAI,CAACF,IAAI,CAAC;MAC7B;MACA,OAAOH,OAAM;IACf;EACF,CAAC;EACDM,KAAK,GAAG;IACN,OAAO;MACLC,OAAO,EAAE,CAAC/C,UAAU,EAAEC,UAAU;IAClC,CAAC;EACH;AACF","names":["getAPI","Header","Footer","News","Map","SearchBar","Datepicker","Pagination","Navigation","Swiper","SwiperSlide","name","data","bookData","offDayData","components","beforeCreate","$store","commit","access","state","defaults","headers","common","created","get","then","response","console","log","IndexData","catch","err","mounted","setInterval","getAccess","methods","e","accessData","refresh","post","localStorage","setItem","error","logout","computed","getOffDay","dateArr","i","length","date","push","Date","setup","modules"],"sourceRoot":"","sources":["/Users/isg/Desktop/work/webstudy/Django-vue-library/vue-templates/src/views/Index.vue"],"sourcesContent":["<template>\n  <div class=\"index\">\n    <Header></Header>\n\n    <main class=\"layout-main content\" id=\"content\">\n\n      <!-- banner -->\n      <div class=\"banner\">\n        <!--<img src=\"@/assets/images/library-banner.jpeg\">-->\n        <div class=\"container\">\n          <h2>책나무 작은 도서관</h2>\n          <p>책으로 둘러싸인 작은 미로에서 혼자만의 지적 모험을...</p>\n\n          <div class=\"search-wrap\">\n            <input type=\"search\" >\n            <font-awesome-icon icon=\"fa-solid fa-magnifying-glass\" />\n          </div>\n        </div>\n      </div>\n\n      <!--  -->\n      <div class=\"container\">\n        <!--search-->\n          <SearchBar></SearchBar>\n\n          <div class=\"news\">\n            <h3>최근 도서관 뉴스 <a href=\"\">></a></h3>\n            <News></News>\n          </div>\n\n\n        <!-- 공지사항 / 일정 / 위치 -->\n        <div class=\"notice-row row\">\n          <div class=\"col-4\">\n            <h3>공지사항</h3>\n            <div class=\"inner\">\n              \n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <h3>도서관 일정</h3>\n            <div class=\"inner\">\n              <datepicker inline=\"true\" :highlighted=\"{\n                dates: getOffDay}\"\n              >\n              </datepicker>\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <h3>도서관 위치</h3>\n            <div class=\"inner\">\n              <Map></Map>\n            </div>\n          </div>\n        </div>\n\n        <!-- 추천 / 신규 / 인기 도서 top3 slider -->\n        <div class=\"top-rank\">\n          <div class=\"suggest\">\n            <swiper\n              :slidesPerView=\"3\"\n              :spaceBetween=\"30\"\n              :slidesPerGroup=\"3\"\n              :loop=\"true\"\n              :loopFillGroupWithBlank=\"true\"\n              :pagination=\"{\n                clickable: true,\n              }\"\n              :navigation=\"true\"\n              :modules=\"modules\"\n              class=\"mySwiper\"\n            >\n              <swiper-slide>Slide 1</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n            </swiper>\n          </div>\n\n          <div class=\"popular\">\n            <swiper\n              :slidesPerView=\"3\"\n              :spaceBetween=\"30\"\n              :slidesPerGroup=\"3\"\n              :loop=\"true\"\n              :loopFillGroupWithBlank=\"true\"\n              :pagination=\"{\n                clickable: true,\n              }\"\n              :navigation=\"true\"\n              :modules=\"modules\"\n              class=\"mySwiper\"\n            >\n              <swiper-slide>Slide 1</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n            </swiper>\n          </div>\n\n          <div class=\"new\">\n            <swiper\n              :slidesPerView=\"3\"\n              :spaceBetween=\"30\"\n              :slidesPerGroup=\"3\"\n              :loop=\"true\"\n              :loopFillGroupWithBlank=\"true\"\n              :pagination=\"{\n                clickable: true,\n              }\"\n              :navigation=\"true\"\n              :modules=\"modules\"\n              class=\"mySwiper\"\n            >\n              <swiper-slide>Slide 1</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n              <swiper-slide>Slide 2</swiper-slide>\n            </swiper>\n          </div>\n        </div>\n\n      </div>\n\n    </main>\n\n    <Footer></Footer>\n\n  </div>\n</template>\n\n<script>\n  import { getAPI } from '@/axios-api'\n  import Header from '@/components/Header'\n  import Footer from '@/components/Footer'\n  import News from '@/components/inner/News'\n  import Map from '@/components/inner/Map'\n  import SearchBar from '@/views/inner/SearchBar'\n  import Datepicker from 'vuejs3-datepicker';\n  import { Pagination, Navigation } from \"swiper\";\n  import { Swiper, SwiperSlide } from \"swiper/vue\";\n\n// Import Swiper styles\nimport \"swiper/css\";\n\nimport \"swiper/css/pagination\";\nimport \"swiper/css/navigation\";\n\n\n  export default {\n    name: 'Index',\n    data () {\n      return {\n        bookData: [],\n        offDayData: [],\n      }\n    },\n    components: {\n      Header, \n      Footer,\n      News,\n      Map,\n      SearchBar,\n      Datepicker,\n      Swiper,\n      SwiperSlide,\n    },\n    beforeCreate() {\n      this.$store.commit('initializerStore')\n      const access = this.$store.state.access\n      if(access) {\n        getAPI.defaults.headers.common['Authorization'] = \"JWT \" + access\n      } else {\n        getAPI.defaults.headers.common['Authorization'] = ''\n      }\n    },\n    created () {\n      getAPI.get('/book/')\n        .then(response => {\n          console.log('book API has recieved data')\n          console.log(response)\n          this.IndexData = response.data\n        })\n        .catch(err => {\n          console.log(err)\n        })\n      getAPI.get('/offday/')\n        .then(response => {\n          console.log('offday API has recieved data')\n          console.log(response)\n          this.offDayData = response.data\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    },\n    mounted() {\n      setInterval(() => {\n        this.getAccess()\n      }, 6000000) //6000000\n    },\n    methods: {\n      getAccess(e) {\n        const accessData = {\n          refresh: this.$store.state.refresh\n        }\n        getAPI.post('api/v1/jwt/refresh', accessData)\n        .then(response => {\n          const access = response.data.access\n          localStorage.setItem(\"access\", access)\n          this.$store.commit('setAccess', access)\n        })\n        .catch(error => {\n          console.log(\"refresh\", error)\n        })\n      },\n      logout() {\n        this.getAccess()\n        console.log(\"LOGOUT\")\n        localStorage.setItem(\"access\", '')\n        localStorage.setItem(\"refresh\", '')\n        this.$store.commit('removeToken')\n      },\n    },\n    computed: {\n      getOffDay() {\n        const dateArr = []\n        for(let i=0; i<this.offDayData.length; i++) {\n          let date = this.offDayData[i]['offday']\n          dateArr.push(new Date(date))\n        }\n        return dateArr\n      }\n    },\n    setup() {\n      return {\n        modules: [Pagination, Navigation],\n      };\n    },\n  }\n</script>\n\n<style lang=\"css\">\n/*@charset \"utf-8\";*/\n@import \"@/assets/fonts/CookieRun/cookie.css\";\n@import \"@/assets/fonts/pretendard/pretendard.css\";\n</style>\n\n<style lang=\"scss\">\n@charset \"utf-8\";\n//@import \"@/assets/scss/common.scss\";\n@import \"@/assets/scss/index.scss\";\n\n\n.vuejs3-datepicker__calendar-topbar {\n  display: none;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}