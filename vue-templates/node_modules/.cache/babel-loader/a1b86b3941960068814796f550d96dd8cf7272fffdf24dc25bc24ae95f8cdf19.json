{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = {\n  class: \"content\"\n};\nconst _hoisted_3 = {\n  class: \"container\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"로그인폼\", -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"eamil\"\n}, \"eamil\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"password\", -1 /* HOISTED */);\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Sign up\", -1 /* HOISTED */);\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", null, \" check user \", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Header = _resolveComponent(\"Header\");\n  const _component_Footer = _resolveComponent(\"Footer\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_Header), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n  }, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"test\",\n    name: \"eamil\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), _hoisted_6, _hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]]), _hoisted_8, _hoisted_9], 32 /* HYDRATE_EVENTS */)]), _hoisted_10, _createElementVNode(\"div\", null, _toDisplayString(this.username), 1 /* TEXT */)]), _createVNode(_component_Footer)]);\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC;AAAO;;EAGXA,KAAK,EAAC;AAAS;;EACbA,KAAK,EAAC;AAAW;gCACxBC,oBAAa,YAAT,MAAI;gCAGFA,oBAAgC;EAAzBC,GAAG,EAAC;AAAO,GAAC,OAAK;gCACwBD,oBAAI;gCACpDA,oBAAsC;EAA/BC,GAAG,EAAC;AAAU,GAAC,UAAQ;gCAC4BD,oBAAI;gCAC9DA,oBAAsC;EAA9BE,IAAI,EAAC;AAAQ,GAAC,SAAO;iCAGjCF,oBAAuB,aAAlB,cAAY;;;;;uBAfrBG,oBAsBM,OAtBNC,UAsBM,GArBJC,aAAiBC,oBAEjBN,oBAcM,OAdNO,UAcM,GAbJP,oBAUM,OAVNQ,UAUM,GATRC,UAAa,EAEbT,oBAMO;IANAU,QAAM,wDAAUC,mDAAU;MAC3BC,UAAgC,kBAChCZ,oBAAgD;IAAzCE,IAAI,EAAC,MAAM;IAACW,IAAI,EAAC,OAAO;+DAAUC,WAAK;iDAALA,WAAK,KAAEC,UAAI,EACpDC,UAAsC,kBACtChB,oBAA0D;IAAnDE,IAAI,EAAC,UAAU;IAACW,IAAI,EAAC,UAAU;+DAAUC,cAAQ;iDAARA,cAAQ,KAAEG,UAAI,EAC9DC,UAAsC,+BAG1CC,WAAuB,EACvBnB,oBAA8B,mCAAjBoB,QAAQ,oBAIvBf,aAAiBgB","names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_createVNode","_component_Header","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","$options","_hoisted_5","name","$data","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","username","_component_Footer"],"sourceRoot":"","sources":["/Users/isg/Desktop/work/webstudy/Django-vue-library/vue-templates/src/views/login/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <Header></Header>\n\n    <div class=\"content\">\n      <div class=\"container\">\n\t\t\t\t<h1>로그인폼</h1>\n \n\t\t\t\t<form @submit.prevent=\"submitForm\">\n          <label for=\"eamil\">eamil</label>\n          <input type=\"test\" name=\"eamil\" v-model=\"email\"><br>\n          <label for=\"password\">password</label>\n          <input type=\"password\" name=\"password\" v-model=\"password\"><br>\n          <button type=\"submit\">Sign up</button>\n\t\t\t\t</form>\n      </div>\n      <div> check user </div>\n      <div> {{this.username}} </div>\n    </div>\n\n\n    <Footer></Footer>\n\n  </div>\n</template>\n\n<script>\n  import { getAPI } from '../../axios-api'\n  import axios from 'axios'\n  import Header from '../../components/Header'\n  import Footer from '../../components/Footer'\n  export default {\n    name: 'Login',\n    data () {\n      return {\n        email: null,\n        password: null,\n      }\n    },\n    components: {\n      Header, \n      Footer,\n    },\n    methods: {\n      submitForm(e) {\n        axios.defaults.headers.common['Authentication'] = ''\n        localStorage.removeItem(\"access\")\n\n        const formData = {\n          //username: this.email,\n          email: this.email,\n          password: this.password,\n        }\n\n        //console.log(formData)\n\n        getAPI.post('/api/v1/jwt/create', formData)\n        .then(response => {\n          \n          console.log(response)\n\n          const access = response.data.access\n          const refresh = response.data.refresh\n\n          this.$store.commit('setAccess', access)\n          this.$store.commit('setRefresh', refresh)\n\n          axios.defaults.headers.common['Authentication'] = \"JWT \" + access\n\n          localStorage.setItem(\"access\", access)\n          localStorage.setItem(\"refresh\", refresh)\n\n          let username = this.email\n          localStorage.setItem(\"loginUser\", username)\n\n          this.$router.push(\"/\")\n        }).catch(error => {\n          console.log(error)\n        })\n      }\n    },\n  }\n</script>\n\n<style lang=\"scss\">\n@charset \"utf-8\";\n@import \"@/assets/scss/body.scss\";\n</style>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}